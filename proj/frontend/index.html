<!doctype html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Simple File Share</title>
<style>
body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:20px}
.card{max-width:800px;margin:auto;padding:16px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.08)}
input[type=file]{display:block;margin:10px 0}
.files{margin-top:16px}
.file{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee}
button{padding:6px 12px;border-radius:6px}
</style>
</head>
<body>
<div class="card">
<h1>Simple File Share</h1>
<p>Upload files from this page and access them from other devices. Deploy frontend to Netlify; set <code>API_BASE</code> to your backend URL.</p>


<label>Choose files to upload</label>
<input id="fileInput" type="file" multiple />
<button id="uploadBtn">Upload</button>


<h3>Uploaded files</h3>
<div id="files" class="files">Loading...</div>
</div>


<script>
const API_BASE = 'https://YOUR_BACKEND_URL'; 


async function listFiles(){
const res = await fetch(API_BASE + '/files');
if(!res.ok){ document.getElementById('files').innerText = 'Could not fetch file list'; return; }
const files = await res.json();
const container = document.getElementById('files');
container.innerHTML = '';
if(files.length === 0) container.innerText = 'No files uploaded yet.';
files.forEach(f => {
const div = document.createElement('div'); div.className='file';
const left = document.createElement('div'); left.innerText = f.name + ' (' + Math.round(f.size/1024) + ' KB)';
const right = document.createElement('div');
const a = document.createElement('a'); a.href = API_BASE + '/files/' + encodeURIComponent(f.id || f.name); a.innerText='Download'; a.download = f.name; a.style.marginRight='8px';
right.appendChild(a);
div.appendChild(left); div.appendChild(right);
container.appendChild(div);
});
}


document.getElementById('uploadBtn').addEventListener('click', async ()=>{
const input = document.getElementById('fileInput');
if(!input.files.length) return alert('Pick a file first');
const form = new FormData();
for(const f of input.files) form.append('files', f, f.name);
const res = await fetch(API_BASE + '/upload', { method: 'POST', body: form });
if(!res.ok) return alert('Upload failed');
alert('Upload complete');
input.value = '';
listFiles();
});


listFiles();
</script>
</body>
</html>